<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neo4J Seo Dashboard - EufyGeo2</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .dashboard-header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .dashboard-header h1 {
            font-size: 2.5rem;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .dashboard-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .chart-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
        }
        
        .chart-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            min-height: 400px;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .metric-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-online { background-color: #4CAF50; }
        .status-warning { background-color: #FF9800; }
        .status-offline { background-color: #F44336; }
    </style>
</head>
<body>
    <div class="dashboard-header">
        <h1>Neo4J Seo Dashboard</h1>
        <p><span class="status-indicator status-online"></span>系统运行正常 | 数据实时更新</p>
    </div>
    
    <!-- 指标卡片 -->
    <div class="metrics-grid">
        <div class="metric-card">
            <div class="metric-value" id="geo-score">75.2</div>
            <div class="metric-label">GEO总分</div>
        </div>
        <div class="metric-card">
            <div class="metric-value" id="citation-rate">18.5%</div>
            <div class="metric-label">AI引用率</div>
        </div>
        <div class="metric-card">
            <div class="metric-value" id="traffic-growth">+23.4%</div>
            <div class="metric-label">流量增长</div>
        </div>
        <div class="metric-card">
            <div class="metric-value" id="conversion-rate">4.2%</div>
            <div class="metric-label">转化率</div>
        </div>
    </div>
    
    <!-- 图表容器 -->
    <div class="dashboard-container">
        <div class="chart-row">
            <div class="chart-container">
                <h3>GEO优化趋势</h3>
                <div id="mainChart" style="width: 100%; height: 350px;"></div>
            </div>
            <div class="chart-container">
                <h3>四大触点表现</h3>
                <div id="touchpointChart" style="width: 100%; height: 350px;"></div>
            </div>
        </div>
        
        <div class="chart-row">
            <div class="chart-container">
                <h3>AI引用来源分布</h3>
                <div id="sourceChart" style="width: 100%; height: 350px;"></div>
            </div>
            <div class="chart-container">
                <h3>关键词表现</h3>
                <div id="keywordChart" style="width: 100%; height: 350px;"></div>
            </div>
        </div>
    </div>

    <script>
        // 确保ECharts已加载
        if (typeof echarts !== 'undefined') {
            console.log('✅ ECharts加载成功');
            initializeCharts();
        } else {
            console.error('❌ ECharts未加载');
        }

        function initializeCharts() {
            try {
                // 初始化所有图表
                const mainChart = echarts.init(document.getElementById('mainChart'));
                const touchpointChart = echarts.init(document.getElementById('touchpointChart'));
                const sourceChart = echarts.init(document.getElementById('sourceChart'));
                const keywordChart = echarts.init(document.getElementById('keywordChart'));

                // GEO优化趋势图
                const trendOption = {
                    title: { text: 'GEO优化趋势', left: 'center' },
                    tooltip: { trigger: 'axis' },
                    legend: { 
                        data: ['GEO总分', 'AI引用率', '流量增长'],
                        bottom: '5%'
                    },
                    xAxis: {
                        type: 'category',
                        data: ['1月', '2月', '3月', '4月', '5月', '6月', '7月']
                    },
                    yAxis: { type: 'value' },
                    series: [
                        {
                            name: 'GEO总分',
                            type: 'line',
                            data: [65, 68, 71, 75, 78, 82, 85],
                            smooth: true,
                            lineStyle: { color: '#667eea' }
                        },
                        {
                            name: 'AI引用率',
                            type: 'line', 
                            data: [12, 14, 16, 18, 20, 22, 24],
                            smooth: true,
                            lineStyle: { color: '#764ba2' }
                        },
                        {
                            name: '流量增长',
                            type: 'bar',
                            data: [5, 8, 12, 15, 18, 23, 28]
                        }
                    ]
                };

                // 四大触点表现
                const touchpointOption = {
                    title: { text: '四大触点表现', left: 'center' },
                    tooltip: { trigger: 'item' },
                    series: [{
                        name: '触点表现',
                        type: 'pie',
                        radius: '60%',
                        data: [
                            { value: 335, name: 'AI搜索优化' },
                            { value: 310, name: '社交内容优化' },
                            { value: 234, name: '电商AI优化' },
                            { value: 135, name: '私域客服优化' }
                        ],
                        emphasis: {
                            itemStyle: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            }
                        }
                    }]
                };

                // AI引用来源分布
                const sourceOption = {
                    title: { text: 'AI引用来源分布', left: 'center' },
                    tooltip: { trigger: 'item' },
                    series: [{
                        name: '引用来源',
                        type: 'doughnut',
                        radius: ['40%', '70%'],
                        data: [
                            { value: 40, name: 'Google AI Overview' },
                            { value: 25, name: 'Perplexity' },
                            { value: 20, name: 'ChatGPT' },
                            { value: 15, name: 'Claude' }
                        ]
                    }]
                };

                // 关键词表现
                const keywordOption = {
                    title: { text: '关键词表现TOP10', left: 'center' },
                    tooltip: { trigger: 'axis', axisPointer: { type: 'shadow' } },
                    xAxis: {
                        type: 'value',
                        boundaryGap: [0, 0.01]
                    },
                    yAxis: {
                        type: 'category',
                        data: ['安防摄像头', '智能门锁', '扫地机器人', '智能音箱', '智能开关', 
                               '智能插座', '智能灯泡', '智能传感器', '智能网关', '智能面板']
                    },
                    series: [{
                        name: '引用次数',
                        type: 'bar',
                        data: [18203, 23489, 29034, 104970, 131744, 630230, 
                               681807, 729684, 854912, 1000000]
                    }]
                };

                // 设置图表选项
                mainChart.setOption(trendOption);
                touchpointChart.setOption(touchpointOption);
                sourceChart.setOption(sourceOption);
                keywordChart.setOption(keywordOption);

                console.log('✅ 所有图表初始化成功');

                // 响应式调整
                window.addEventListener('resize', function() {
                    mainChart.resize();
                    touchpointChart.resize(); 
                    sourceChart.resize();
                    keywordChart.resize();
                });

                // 模拟数据更新
                setInterval(updateMetrics, 5000);

            } catch (error) {
                console.error('❌ 图表初始化失败:', error);
            }
        }

        function updateMetrics() {
            // 模拟实时数据更新
            const geoScore = (75 + Math.random() * 10).toFixed(1);
            const citationRate = (18 + Math.random() * 5).toFixed(1);
            const trafficGrowth = (20 + Math.random() * 10).toFixed(1);
            const conversionRate = (4 + Math.random() * 2).toFixed(1);

            document.getElementById('geo-score').textContent = geoScore;
            document.getElementById('citation-rate').textContent = citationRate + '%';
            document.getElementById('traffic-growth').textContent = '+' + trafficGrowth + '%';
            document.getElementById('conversion-rate').textContent = conversionRate + '%';
        }
    </script>
</body>
</html>